# Inspector File Structure

## ğŸ“¦ Source Files (Required â€” Part of Inspector Package)

These files are **needed** for the inspector to run. They are part of the inspector codebase itself.

### Core Files

```
inspector/
â”œâ”€â”€ package.json              # Package config, scripts, dependencies
â”œâ”€â”€ tsconfig.json             # TypeScript configuration
â”œâ”€â”€ package-lock.json          # Dependency lock file
â””â”€â”€ src/
    â”œâ”€â”€ index.ts              # Main CLI entry point (orchestrates all agents)
    â”œâ”€â”€ store.ts              # Centralized in-memory store (shared state)
    â”œâ”€â”€ types.ts              # TypeScript type definitions
    â”œâ”€â”€ auto-detect.ts         # Auto-detection logic (discovers project config)
    â”‚
    â”œâ”€â”€ agents/                # All analysis agents
    â”‚   â”œâ”€â”€ repo-indexer.ts           # Phase 1: Indexes files, imports, symbols
    â”‚   â”œâ”€â”€ feature-grouper.ts         # Phase 2: Groups files into features
    â”‚   â”œâ”€â”€ quality-analyzer.ts        # Calculates complexity & quality metrics
    â”‚   â”œâ”€â”€ bug-risk-analyzer.ts      # Identifies bug risk patterns
    â”‚   â”œâ”€â”€ duplication-analyzer.ts   # Detects code duplication
    â”‚   â”œâ”€â”€ impact-analyzer.ts         # Finds high blast-radius zones
    â”‚   â”œâ”€â”€ migration-tracker.ts       # Tracks framework migration (if detected)
    â”‚   â”œâ”€â”€ bridge-analyzer.ts         # Validates event bridges (if detected)
    â”‚   â”œâ”€â”€ dead-code-detector.ts      # Finds unused code
    â”‚   â”œâ”€â”€ store-complexity.ts        # Analyzes state management (if detected)
    â”‚   â”œâ”€â”€ feature-flag-analyzer.ts   # Indexes feature flags (if detected)
    â”‚   â”œâ”€â”€ config-drift.ts            # Detects config inconsistencies (monorepo)
    â”‚   â”œâ”€â”€ recommendation.ts         # Generates reports & diagrams
    â”‚   â””â”€â”€ dashboard-generator.ts     # Generates HTML dashboard
    â”‚
    â””â”€â”€ utils/                 # Utility functions
        â”œâ”€â”€ ast.ts             # AST parsing (imports, symbols, complexity)
        â”œâ”€â”€ fs-utils.ts        # File system operations
        â””â”€â”€ git.ts             # Git history analysis
```

**Total: 19 source files** (TypeScript + config)

---

## ğŸ¯ Runtime-Generated Files (Created by Agents)

These files are **generated** during execution in the `report/` directory (at project root).

### Generated Directory Structure

```
{project-root}/
â””â”€â”€ report/                    # Created by recommendation.ts
    â”‚
    â”œâ”€â”€ dashboard.html         # âœ… Interactive HTML dashboard (dashboard-generator.ts)
    â”œâ”€â”€ global_index.json      # âœ… Global index summary (recommendation.ts)
    â”‚
    â”œâ”€â”€ architecture.mmd       # âœ… Mermaid architecture diagram (recommendation.ts)
    â”‚
    â”œâ”€â”€ duplication.md         # âœ… Code duplication report (recommendation.ts)
    â”œâ”€â”€ risk_map.md            # âœ… High-risk zones report (recommendation.ts)
    â”œâ”€â”€ dead_code.md           # âœ… Dead code report (recommendation.ts)
    â”œâ”€â”€ recommendations.md     # âœ… Actionable recommendations (recommendation.ts)
    â”‚
    â”œâ”€â”€ bridge_health.md       # âœ… Event bridge health (if migration detected)
    â”œâ”€â”€ migration_status.md    # âœ… Migration progress (if migration detected)
    â”œâ”€â”€ store_complexity.md    # âœ… State management analysis (if state mgmt detected)
    â”œâ”€â”€ config_drift.md        # âœ… Config inconsistencies (if monorepo)
    â”‚
    â”œâ”€â”€ features/              # âœ… One report per feature (recommendation.ts)
    â”‚   â”œâ”€â”€ feature-{feature-id}.md
    â”‚   â””â”€â”€ ... (one file per detected feature)
    â”‚
    â””â”€â”€ feature-agents/        # âœ… Auto-generated agent specs (recommendation.ts)
        â”œâ”€â”€ {feature-id}-AGENT.md
        â””â”€â”€ ... (one file per detected feature)
```

---

## ğŸ“Š File Generation Map

| Generated File               | Generated By             | Agent                | Condition                       |
| ---------------------------- | ------------------------ | -------------------- | ------------------------------- |
| `report/dashboard.html`      | `dashboard-generator.ts` | Dashboard Generator  | Always                          |
| `report/global_index.json`   | `recommendation.ts`      | Recommendation Agent | Always                          |
| `report/architecture.mmd`    | `recommendation.ts`      | Recommendation Agent | Always                          |
| `report/duplication.md`      | `recommendation.ts`      | Recommendation Agent | Always                          |
| `report/risk_map.md`         | `recommendation.ts`      | Recommendation Agent | Always                          |
| `report/dead_code.md`        | `recommendation.ts`      | Recommendation Agent | Always                          |
| `report/recommendations.md`  | `recommendation.ts`      | Recommendation Agent | Always                          |
| `report/features/*.md`       | `recommendation.ts`      | Recommendation Agent | Always (one per feature)        |
| `report/feature-agents/*.md` | `recommendation.ts`      | Recommendation Agent | Always (one per feature)        |
| `report/bridge_health.md`    | `recommendation.ts`      | Recommendation Agent | If migration detected           |
| `report/migration_status.md` | `recommendation.ts`      | Recommendation Agent | If migration detected           |
| `report/store_complexity.md` | `recommendation.ts`      | Recommendation Agent | If state management detected    |
| `report/config_drift.md`     | `recommendation.ts`      | Recommendation Agent | If monorepo (multiple packages) |

---

## ğŸ”„ Execution Flow

1. **Source Files Read**: Inspector reads its own source code + project files to analyze
2. **Analysis Phase**: Agents populate `InspectorStore` (in-memory)
3. **Generation Phase**: `recommendation.ts` + `dashboard-generator.ts` write reports
4. **Output**: All files written to `{project-root}/report/`

---

## ğŸ“ Summary

- **Source Files**: 19 files (inspector codebase)
- **Generated Files**: ~220+ files (reports, features, agents)

**Key Point**: The inspector is **100% self-contained**. It only needs:

- Its own source files (in `inspector/` directory)
- The project to analyze (any directory)
- Node.js runtime

No configuration files needed â€” everything is auto-detected! ğŸ‰
